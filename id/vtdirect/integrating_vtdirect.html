<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation. Payment Gateway Indonesia, transaksi online lebih aman, mudah, cepat! Veritrans memberi solusi sistem payment gateway terbaik untuk e-commerce di Indonesia.">
    <meta name="keywords" content="Veritrans, Veritrans Indonesia, payment gateway indonesia, Pembayaran Online Indonesia, online payment Indonesia, sistem transaksi online"> 
    <link href="../../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <title>Docs - Veritrans Indonesia</title>
		<link rel="shortcut icon" href="/favicon.ico"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
     <!-- Fixed navbar -->
<div class="header navbar navbar-default navbar-fixed-top">
  <div class="custom-container">
    <div class="col-md-3 navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <h2 class="logo"><a href="index.html" title="Home"><span>Veritrans</span></a></h2>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="whatwedo.html" title="What We Do">what we do</a></li>
        <li><a href="index.html#vt-products" title="Our Online Payment Products">products</a></li>
        <li><a href="pricing.html" title="Check for Our Pricing">pricing</a></li>
        <li><a href="about.html" title="About Veritrans">about</a></li>
        <!-- <li><a href="http://docs.veritrans.co.id" title="Product Documentations">docs</a></li> -->
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">developer <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="sandbox.html">sandbox</a></li>
            <li><a href="https://docs.google.com/document/d/1Z0s7CsXp91YD52ibWcQ7iIQ6TDtWr3XCI1uaFQF12-w/pub">documentation</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">more <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="http://docs.veritrans.co.id/faq/general.html" title="FAQ & How To">FAQ</a></li>
            <li><a href="http://blog.veritrans.co.id" title="Blog, News and Press Release">blog</a></li>
            <li><a href="career.html" title="Career at Veritrans">career</a></li>
            <li><a href="contact.html" title="Contact Us">contact</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right register-login">
        <li class="pull-left"><a href="https://my.veritrans.co.id/register" class="register">register</a></li>
        <li class="pull-left"><a href="https://my.veritrans.co.id/login">login</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>

    <div class="custom-container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
	<div class="documentation-sidebar">
		<div class="docs-logo">
			<span>DOCS</span>
		</div>
		<div class="language-toggle"> <a href="../../vtdirect/integrating_vtdirect.html">English</a> / Bahasa Indonesia</div>
		<ul class="sidebar">
			
			<li><a class="parent">FAQ</a>
				<ul class="child-menu">
					
					<li class=""><a href="../faq/general.html">Informasi Umum</a></li>
					
					<li class=""><a href="../faq/pricing.html">Pricing</a></li>
					
					<li class=""><a href="../faq/fraud_and_security.html">Fraud and Security</a></li>
					
					<li class=""><a href="../faq/integration.html">Integrasi</a></li>
					
					<li class=""><a href="../faq/account_management.html">Manajemen Akun</a></li>
					
					<li class=""><a href="../faq/fds_response.html">Fraud Detection System (FDS) Response</a></li>
					
				</ul>
			</li>
			<li><a class="parent">How to</a>
				<ul class="child-menu">
					
					<li class=""><a href="../howto/fds.html">Sistem Deteksi Fraud</a></li>
					
					<li class=""><a href="../howto/cancel.html">Pembatalan Transaksi</a></li>
					
				</ul>
			</li>
		</ul>
	</div>
</div><!--/span-->
        <div class="col-xs-12 col-sm-9" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="id-vtdirect-integrating-vtdirect">
            <h2>Integrasi VT-Direct</h2>

<h3>Tiga Langkah Integrasi</h3>
<ol>
	<li>Mendapatkan Token</li>
	<li>Mengirim Token ke Merchant</li>
	<li>Melakukan Charge Transaksi</li>
	<li>Menangani Respon</li>
</ol>

<br />

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#step1" data-toggle="tab"><span>Langkah 1</span>Mendapatkan Token</a></li>
  <li><a href="#step2" data-toggle="tab"><span>Langkah 2</span>Mengirim Token ke Merchant</a></li>
  <li><a href="#step3" data-toggle="tab"><span>Langkah 3</span>Melakukan Charge Transaksi</a></li>
  <li><a href="#step4" data-toggle="tab"><span>Langkah 4</span>Menangani Respon</a></li>
</ul>

<div class="tab-content">
<div class="tab-pane active" id="step1"><!-- step 1-->
<!-- satu -->
<h3>Mendapatkan Token</h3>

<p><img title="vtdirect" class="img-responsive" src="/images/vtdirect_introduction_1.png"></p>

<p>Pada bagian ini menjelaskan tiga tahap yang tergambarkan pada diagram alur di gambar 1. Setiap transaksi kartu kredit diawali dengan proses Token Request. Ketika pelanggan mengeklik "Pay (Bayar)", data kartu kredit pelanggan secara langsung dikirim ke server Veritrans oleh Veritrans.js. Server Veritrans kemudian mengembalikan sebuah onetime-token ke browser pelanggan. Onetime-token tersebut merepresentasikan detail data kartu kredit pelanggan. Tahap ini menjaga agar server merchant tidak perlu menyimpan data kartu kredit, sehingga secara signifikan mengurangi resiko keamanan di server merchant.</p>

<p>Veritrans menyediakan sebuah script JavaScript kecil untuk memudahkan proses Request Token ke server Veritrans. Untuk menggunakannnya, tambahkan link ke Veritrans.js di halaman pembayaran merchant seperti contoh berikut:</p>

<pre class="highlight html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="na">src=</span><span class="s">&quot;https://payments.veritrans.co.id/vtdirect/veritrans.min.js&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;/script&gt;</span>
</pre>
<p>Selanjutnya, buat sebuah form pembayaran untuk mendapatkan data kartu kredit dari pelanggan. Perhatikan bahwa semua field yang terkait dengan data sensitif kartu kredit tidak boleh mempunyai attribut <code>name</code>. Hal ini untuk mencegah data kartu kredit dikirim ke server merchant. Lihat contoh berikut:</p>

<pre class="highlight html"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;http://mysamplestore.com/sample_payment_handler_url&quot;</span> <span class="na">method=</span><span class="s">&quot;POST&quot;</span> <span class="na">id=</span><span class="s">&quot;payment-form&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;fieldset&gt;</span>
    <span class="nt">&lt;legend&gt;</span>Checkout<span class="nt">&lt;/legend&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label&gt;</span>Card Number<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;card-number&quot;</span> <span class="na">size=</span><span class="s">&quot;20&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label&gt;</span>Expiration (MM/YYYY)<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;card-expiry-month&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;MM&quot;</span> <span class="na">size=</span><span class="s">&quot;2&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;span&gt;</span> / <span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;card-expiry-year&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;YYYY&quot;</span> <span class="na">size=</span><span class="s">&quot;4&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label&gt;</span>CVV<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;card-cvv&quot;</span> <span class="na">size=</span><span class="s">&quot;4&quot;</span> <span class="na">type=</span><span class="s">&quot;password&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;token_id&quot;</span> <span class="na">name=</span><span class="s">&quot;token_id&quot;</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;submit-button&quot;</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>Submit Payment<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/fieldset&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre>
<p>Setelah medapatkan data kartu kredit, script JavaScript berikut ini menggunakan library Veritrans.js untuk mengirim data kartu kredit ke server Veritrans.</p>

<p>Contoh JavaScript(jQuery) untuk mengirim data kartu kredit ke Veritrans:</p>

<pre class="highlight html"><span class="nt">&lt;script&gt;</span> <span class="nx">$</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">Veritrans</span><span class="p">.</span><span class="nx">client_key</span> <span class="o">=</span> <span class="s2">&quot;client-key&quot;</span><span class="p">;</span> <span class="c1">// please add client-key from veritrans
</span>
    <span class="kd">function</span> <span class="nx">_cardSet</span><span class="p">(){</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;card_number&quot;</span> <span class="err">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'input.card-number'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="s2">&quot;card_exp_month&quot;</span><span class="err">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'input.card-expiry-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="s2">&quot;card_exp_year&quot;</span> <span class="err">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'input.card-expiry-year'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="s2">&quot;card_cvv&quot;</span> <span class="err">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'input.card-cvv'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">_success</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#token_id'</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">token_id</span><span class="p">);</span> <span class="c1">// store token data in input #token_id
</span>      <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#payment-form&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">submit</span><span class="p">();</span> <span class="c1">//submits Token to merchant server
</span>    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">_error</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span> <span class="c1">// please customize the error
</span>      <span class="nx">$</span><span class="p">(</span><span class="s1">'.submit-button'</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#payment-form&quot;</span><span class="p">).</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.submit-button'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">,</span> <span class="s2">&quot;disabled&quot;</span><span class="p">);</span> <span class="c1">// disable the submit button
</span>      <span class="nx">Veritrans</span><span class="p">.</span><span class="nx">tokenGet</span><span class="p">(</span><span class="nx">_cardSet</span><span class="p">,</span> <span class="nx">_success</span><span class="p">,</span> <span class="nx">_error</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</pre>
<p>Setiap <code>Token</code> valid untuk jangka waktu 3 menit dan hanya dapat digunakan untuk sekali transaksi. </p>

<h4>Parameter yang wajib dikirim saat Request Token</h4>
<table>
	<thead>
		<tr>
			<th>Nama</th>
			<th>Deskripsi</th>
			<th>Contoh</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>card_number</td>
			<td>Nomor kartu kredit.</td>
			<td>4111111111111111</td>
		</tr>
		<tr>
			<td>card_exp_month</td>
			<td>Credit Card expiry month</td>
			<td>06</td>
		</tr>
		<tr>
			<td>card_exp_year</td>
			<td>Credit Card expiry year</td>
			<td>2020</td>
		</tr>
		<tr>
			<td>card_cvv</td>
			<td>CVV (Card Verification Value)</td>
			<td>123</td>
		</tr>
		<tr>
			<td>client_key</td>
			<td>Client Key Merchant</td>
			<td>567aee9a-a345-435a-a98c-d001b96c3fa9</td>
		</tr>
	</tbody>
</table>

</div><!-- end of step 1-->

<div class="tab-pane" id="step2"><!-- step 2-->

<!-- dua -->

<h3>Mengirim Token ke Merchant</h3>

<p>Pada langkah 1, kita sudah mendapatkan <code>Token</code> yang tersimpan di field <code>token_id</code>. Selanjutnya gunakan HTTP(S) POST untuk mengirim <code>Token</code> tersebut ke server merchant. Contoh kodenya sudah tergabung di contoh kode pada langkah 1, yaitu pada bagian berikut:</p>

<pre class="highlight text">...
function _success(d){
  $('#token_id').val(d.data.token_id); // store token data in input #token_id
  $(&quot;#payment-form&quot;)[0].submit(); //submits Token to merchant server
};
...
</pre>
<p>Berikut ini adalah contoh kode di sisi server merchant untuk menangkap <code>token_id</code> yang telah di kirim oleh form tersebut.</p>

<ul class="nav nav-tabs">
	<li class="active"><a href="#php1" data-toggle="tab">PHP</a></li>
	<li><a href="#ruby1" data-toggle="tab">Ruby</a></li>
</ul>

<div class="tab-content">
<div class="tab-pane active" id="php1">
<pre class="highlight php"><span class="cp">&lt;?php</span>
  <span class="nv">$token</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s2">&quot;token_id&quot;</span><span class="p">];</span> 
<span class="cp">?&gt;</span>
</pre></div>
<div class="tab-pane" id="ruby1">
<pre class="highlight ruby"><span class="n">token</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:token_id</span><span class="o">]</span>
</pre></div>	
</div>

</div><!-- end of step 2-->

<div class="tab-pane" id="step3"><!-- step 3-->

<!-- tiga -->

<h3>Melakukan Charge Transaksi</h3>

<p>Setelah <code>Token</code> terkirim ke merchant server, merchant server dapat menggunakannya untuk melakukan charge transaksi ke kartu kredit tersebut.</p>

<p>Karena proses Token Request dilakukan oleh web browser pelanggan, sedangkan request Charge Transaksi dilakukan oleh merchant server, maka alamat IP  Token Request dan Charge Transaction akan berbeda. Untuk alasan keamanan, Veritrans telah menambahkan sistem validasi untuk menolak proses Charge Transaction jika berasal dari alamat IP yang sama dengan Token Request.</p>

<p>Seperti yang telah disebutkan sebelumnya, <code>Token</code> hanya dapat digunakan untuk sekali transaksi. Jika terjadi kegagalan saat proses transaksi dilakukan (misalnya: transaksi ditolak oleh bank atau ditolak oleh Veritrans Fraud Detection System), maka pelanggan harus mengulangi proses Request Token untuk mendapatkan <code>Token</code> baru.</p>

<h4>Endpoint</h4>
<table>
	<tr>
		<td>Endpoint</td>
      <td> : </td>
		<td>https://payments.veritrans.co.id/vtdirect/v1/charges</td>
	</tr>
	<tr>
		<td>HTTP Method</td>
      <td> : </td>
		<td>POST</td>
	</tr>
</table> 

<h4>Header</h4>

<table>
	<tr>
		<td>Accept</td>
      <td> : </td>
		<td>Application/JSON</td>
	</tr>
	<tr>
		<td>Content Type</td>
      <td> : </td>
		<td>Application/JSON</td>
	</tr>
    <tr>
      <td>Authorization</td>
      <td> : </td>
      <td><strong>Basic Base64 (server-key:)</strong></td>
    </tr>
</table> 

<p>Header untuk authorization mengikuti format Basic Authentication yang merupakan hasil generate Base 64 dari username & password. Gunakan <code>server_key</code> sebagai username dan biarkan password kosong.</p>

<pre class="highlight text">username:password
</pre>
<p>Sebagai contoh, jika <code>server_key</code> adalah:</p>

<pre class="highlight text">94960ece-9513-4265-9cf2-67a4da330213
</pre>
<p>maka akan menjadi:</p>

<pre class="highlight text">94960ece-9513-4265-9cf2-67a4da330213:
</pre>
<p>Catatan: pastikan bahwa terdapat tanda ":" setelah <code>server_key</code>. Selanjutnya konvert ke format Base 64, sehingga menjadi:</p>

<pre class="highlight text">OTQ5NjBlY2UtOTUxMy00MjY1LTljZjItNjdhNGRhMzMwMjEzOg==
</pre>
<p>Tambahkan <code>Basic</code>di depan hasil generate format Base 64. Sehingga hasil akhir header Authorization-nya menjadi:</p>

<pre class="highlight text">Authorization : Basic OTQ5NjBlY2UtOTUxMy00MjY1LTljZjItNjdhNGRhMzMwMjEzOg==
</pre>
<h4>Body</h4>
<p>Berikut ini adalah contoh body raw untuk request Charge Transaction ke Veritrans dalam format JSON:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;token_id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;94960ece-9513-4265-9cf2-67a4da330213&quot;</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">&quot;order_id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;order123&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;order_items&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;price&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;qty&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mie Ayam&quot;</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;11&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;price&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;qty&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bakso&quot;</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">&quot;gross_amount&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">30000</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;email&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pelanggan@website.com&quot;</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">&quot;shipping_address&quot;</span><span class="w"> </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">&quot;first_name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sam&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;last_name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anthony&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address1&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address2&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;city&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;postal_code&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;16954&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;phone&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0123456789123&quot;</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="s2">&quot;billing_address&quot;</span><span class="w"> </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">&quot;first_name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sam&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;last_name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anthony&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;address1&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;address2&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;city&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;postal_code&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;16954&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;phone&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0123456789123&quot;</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h4>Contoh Kode</h4>
<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#php32" data-toggle="tab">PHP</a></li>
	<li><a href="#ruby32" data-toggle="tab">Ruby</a></li>
</ul>

<div class="tab-content">
<div class="tab-pane active" id="php32">
<pre class="highlight php"><span class="cp">&lt;?php</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
 <span class="s1">'token_id'</span> <span class="o">=&gt;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s2">&quot;token_id&quot;</span><span class="p">],</span>
 <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s2">&quot;order123&quot;</span><span class="p">,</span> 
 <span class="s1">'order_items'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
  <span class="p">[</span><span class="s1">'id'</span>    <span class="o">=&gt;</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span>
   <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="mi">10000</span><span class="p">,</span>
   <span class="s1">'qty'</span>   <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
   <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="s2">&quot;Mie Ayam&quot;</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">'id'</span>    <span class="o">=&gt;</span> <span class="s2">&quot;11&quot;</span><span class="p">,</span>
   <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="mi">20000</span><span class="p">,</span>
   <span class="s1">'qty'</span>   <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
   <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="s2">&quot;Bakso&quot;</span><span class="p">]</span>
  <span class="p">),</span>
 <span class="s2">&quot;gross_amount&quot;</span>   <span class="o">=&gt;</span> <span class="mi">30000</span><span class="p">,</span>
 <span class="s2">&quot;email&quot;</span>          <span class="o">=&gt;</span> <span class="s2">&quot;vt-testing@veritrans.co.id&quot;</span><span class="p">,</span>
 <span class="s2">&quot;shipping_address&quot;</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
   <span class="s2">&quot;first_name&quot;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;Sam&quot;</span><span class="p">,</span>
   <span class="s2">&quot;last_name&quot;</span>   <span class="o">=&gt;</span> <span class="s2">&quot;Anthony&quot;</span><span class="p">,</span>
   <span class="s2">&quot;address1&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span>
   <span class="s2">&quot;address2&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span>
   <span class="s2">&quot;city&quot;</span>        <span class="o">=&gt;</span> <span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span>
   <span class="s2">&quot;postal_code&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;16954&quot;</span><span class="p">,</span>
   <span class="s2">&quot;phone&quot;</span>       <span class="o">=&gt;</span> <span class="s2">&quot;0123456789123&quot;</span>
   <span class="p">),</span>
 <span class="s2">&quot;billing_address&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
   <span class="s2">&quot;first_name&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;Sam&quot;</span><span class="p">,</span>
   <span class="s2">&quot;last_name&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;Anthony&quot;</span><span class="p">,</span>
   <span class="s2">&quot;address1&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span>
   <span class="s2">&quot;address2&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span>
   <span class="s2">&quot;city&quot;</span>          <span class="o">=&gt;</span> <span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span>
   <span class="s2">&quot;postal_code&quot;</span>   <span class="o">=&gt;</span> <span class="s2">&quot;16954&quot;</span><span class="p">,</span>
   <span class="s2">&quot;phone&quot;</span>         <span class="o">=&gt;</span> <span class="s2">&quot;0123456789123&quot;</span>
   <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$vt_charges_endpoint</span> <span class="o">=</span> <span class="s2">&quot;https://payments.veritrans.co.id/vtdirect/v1/charges&quot;</span><span class="p">;</span>
<span class="nv">$server_key</span> <span class="o">=</span> <span class="s2">&quot;c662f47d-8a2c-4fe7-8ad2-02bfaf1fb725&quot;</span><span class="p">;</span> <span class="c1">//change with your actual server_key
</span><span class="nv">$auth</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'Authorization: Basic %s'</span><span class="p">,</span> <span class="nb">base64_encode</span><span class="p">(</span><span class="nv">$server_key</span><span class="o">.</span><span class="s1">':'</span><span class="p">));</span>

<span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="nv">$vt_charges_endpoint</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
		<span class="s1">'Accept: application/json'</span><span class="p">,</span>
		<span class="nv">$auth</span> <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>

<span class="cp">?&gt;</span>

</pre></div>

<div class="tab-pane" id="ruby32">
		<p>Pada contoh ini kita menggunakan <strong>Faraday</strong> untuk membantu kita mengirim HTTP request. Faraday adalah sebuah Ruby library untuk mengirim HTTP request. Jadi kita perlu menambahkan Faraday di <code>gemfile</code>. Jangan lupa untuk menjalankan <code>bundle</code> dan me-restart server setelah mengupdate <code>gemfile</code>.</p>

<pre class="highlight ruby"><span class="n">gem</span> <span class="s2">&quot;faraday&quot;</span><span class="p">,</span> <span class="s2">&quot;~&gt; 0.8.8&quot;</span>
</pre>
<p>Tambahkan baris ini ke controller:</p>

<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'faraday'</span>
<span class="nb">require</span> <span class="s1">'base64'</span>
</pre>
<p>Berikut ini adalah contoh kode di action yang menangani payment form dari langkah sebelumnya. Pada contoh kode ini kita melakukan <strong>Charge Transaction</strong> dengan memanfaatkan Faraday untuk mengirim request <strong>Charge</strong> ke Veritrans.</p>

<pre class="highlight ruby">
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s1">'token_id'</span> 		<span class="o">=&gt;</span> <span class="n">params</span><span class="o">[</span><span class="ss">:token_id</span><span class="o">]</span><span class="p">,</span>
	<span class="s1">'order_id'</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;order123&quot;</span><span class="p">,</span>
	<span class="s1">'order_items'</span> <span class="o">=&gt;</span> <span class="o">[</span>
		<span class="p">{</span>
		<span class="s1">'id'</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span>
		<span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="mi">10000</span><span class="p">,</span>
		<span class="s1">'qty'</span> 	<span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
		<span class="s1">'name'</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Mie Ayam&quot;</span>
		<span class="p">},</span>
		<span class="p">{</span>
		<span class="s1">'id'</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;11&quot;</span><span class="p">,</span>
		<span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="mi">20000</span><span class="p">,</span>
		<span class="s1">'qty'</span> 	<span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
		<span class="s1">'name'</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Bakso&quot;</span>
		<span class="p">}</span>
		<span class="o">]</span><span class="p">,</span>
	<span class="s1">'gross_amount'</span> 	<span class="o">=&gt;</span> <span class="mi">30000</span><span class="p">,</span>
	<span class="s2">&quot;email&quot;</span> 				<span class="o">=&gt;</span> <span class="s2">&quot;vt-testing@veritrans.co.id&quot;</span><span class="p">,</span>
	<span class="s1">'shipping_address'</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="s2">&quot;first_name&quot;</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Sam&quot;</span><span class="p">,</span>
		<span class="s2">&quot;last_name&quot;</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Anthony&quot;</span><span class="p">,</span>
		<span class="s2">&quot;address1&quot;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span>
		<span class="s2">&quot;address2&quot;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span>
		<span class="s2">&quot;city&quot;</span> 				<span class="o">=&gt;</span> <span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span>
		<span class="s2">&quot;postal_code&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;16954&quot;</span><span class="p">,</span>
		<span class="s2">&quot;phone&quot;</span> 			<span class="o">=&gt;</span> <span class="s2">&quot;0123456789123&quot;</span>
	<span class="p">},</span>
	<span class="s2">&quot;billing_address&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="s2">&quot;first_name&quot;</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Sam&quot;</span><span class="p">,</span>
		<span class="s2">&quot;last_name&quot;</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Anthony&quot;</span><span class="p">,</span>
		<span class="s2">&quot;address1&quot;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span>
		<span class="s2">&quot;address2&quot;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span>
		<span class="s2">&quot;city&quot;</span> 				<span class="o">=&gt;</span> <span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span>
		<span class="s2">&quot;postal_code&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;16954&quot;</span><span class="p">,</span>
		<span class="s2">&quot;phone&quot;</span> 			<span class="o">=&gt;</span> <span class="s2">&quot;0123456789123&quot;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="n">server_key</span> <span class="o">=</span> <span class="s2">&quot;c662f47d-8a2c-4fe7-8ad2-02bfaf1fb725&quot;</span><span class="p">;</span> <span class="c1">#change with your actual server_key</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="nf">.new</span><span class="p">(</span><span class="ss">:url</span> <span class="o">=&gt;</span> <span class="s1">'https://payments.veritrans.co.id'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">faraday</span><span class="o">|</span>
  <span class="n">faraday</span><span class="nf">.request</span>  <span class="ss">:url_encoded</span>             <span class="c1"># form-encode POST params</span>
  <span class="n">faraday</span><span class="nf">.adapter</span>  <span class="no">Faraday</span><span class="nf">.default_adapter</span>  <span class="c1"># make requests with Net::HTTP</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="nf">.post</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
  <span class="n">req</span><span class="nf">.url</span> <span class="s1">'/vtdirect/v1/charges'</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">'Accept'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">'Content-Type'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">'Authorization'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'Basic '</span> <span class="o">+</span> <span class="no">Base64</span><span class="nf">.encode64</span><span class="p">(</span><span class="n">server_key</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
  <span class="n">req</span><span class="nf">.body</span> <span class="o">=</span> <span class="n">data</span><span class="nf">.to_json</span>
<span class="k">end</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">JSON</span><span class="nf">.parse</span> <span class="n">response</span><span class="nf">.body</span>

</pre>	</div>	
</div><!-- tab-content -->

<h4>Parameter yang perlu dikirim saat melakukan Charge Transaction</h4>
<table>
<thead>
  <tr>
      <th>Nama</th>
      <th>Wajib/Opsional</th>
      <th>Type/Size</th>
      <th>Deskripsi</th>
      <th>Contoh</th>
  </tr>
</thead>
<tbody>
  <tr>
      <td>token</td>
      <td>Wajib</td>
      <td>Not Applicable</td>
      <td><code>Token</code> yang diterima dari browser pelanggan hasil proses Token Request.</td>
      <td>94960ece-9513-4265-9cf2-67a4da330213</td>
  </tr>
  <tr>
      <td>order_id</td>
      <td>Wajib</td>
      <td>20 character alpha-numeric [a-zA-Z0-9]. No white space.</td>
      <td>Order id yang di-genearte oleh merchant. Setiap order id hanya dapat melakukan sekali charge transaction.</td>
      <td>order1</td>
  </tr>
  <tr>
      <td>order_items</td>
      <td>Wajib</td>
      <td>JSON</td>
      <td>Daftar item yang dibeli.</td>
      <td>See example below</td>
  </tr>
  <tr>
      <td>gross_amount</td>
      <td>Wajib</td>
      <td>Numeric [0-9], maximum 99.999.999.</td>
      <td>Total harga dari transaksi.</td>
      <td>200</td>
  </tr>
  <tr>
      <td>email</td>
      <td>Wajib</td>
      <td>30 character alpha-numeric-symbols. No white space.</td>
      <td>Email pelanggan.</td>
      <td>pelanggan@website.com</td>
  </tr>
  <tr>
      <td>billing_address</td>
      <td>Wajib</td>
      <td>JSON</td>
      <td>Alamat billing pelanggan.</td>
      <td>Lihat contoh di atas.</td>
  </tr>
  <tr>
      <td>shipping_address</td>
      <td>Opsional</td>
      <td>JSON</td>
      <td>Customer shipping address</td>
      <td>Lihat contoh di atas.</td>
  </tr>
</tbody>
</table>

<p><strong>Catatan</strong>: Seperti telah disebutkan sebelumnya, karena alasan kemanan, Veritrans telah menambahkan sistem validasi untuk menolak Charge Transaction yang berasal dari alamat IP yang sama dengan Request Token dilakukan. Validasi ini mungkin akan merepotkan di tahap development karena Anda tidak dapat melakukan pengujian transaksi dari komputer yang sama (alamat IP sama). Veritrans menyediakan solusi untuk permasalahan ini, yaitu dengan menggunakan alamat <code>vt-testing@veritrans.co.id</code> untuk parameter email. Dengan menggunakan parameter email tersebut, transaksi (proses Request Token dan proses Charge Transaction) dapat dilakukan dari alamat IP yang sama.</p>

<h4>Parameter untuk Order Item</h4>

<table>
    <thead>
      <tr>
          <th>Nama</th>
          <th>Wajib/Opsional</th>
          <th>Type/Size</th>
          <th>Deskripsi</th>
          <th>Contoh</th>
      </tr>
    </thead>
    <tbody>
      <tr>
          <td>id</td>
          <td>Wajib</td>
          <td>20 character alpha-numeric [a-zA-Z0-9].</td>
          <td>ID Produk</td>
          <td>produk1</td>
      </tr>
      <tr>
          <td>price</td>
          <td>Wajib</td>
          <td>Numeric [0-9], maximum 9.999.999.</td>
          <td>Harga Produk</td>
          <td>100</td>
      </tr>
      <tr>
          <td>qty</td>
          <td>Wajib</td>
          <td>Numeric [0-9], maximum 9999.</td>
          <td>Banyaknya Produk</td>
          <td>1</td>
      </tr>
      <tr>
          <td>name</td>
          <td>Wajib</td>
          <td>20 character alpha-numeric [a-zA-Z0-9].</td>
          <td>Nama Produk</td>
          <td>Mie Instan</td>
      </tr>        
    </tbody>
</table>

<h4>Parameter untuk Alamat Billing dan Alamat Pengiriman</h4>

<table>
    <thead>
      <tr>
          <th>Nama</th>
          <th>Wajib/Opsional</th>
          <th>Type/Size</th>
          <th>Deskripsi</th>
          <th>Contoh</th>
      </tr>
    </thead>
    <tbody>
      <tr>
          <td>first_name</td>
          <td>Yes</td>
          <td>20 character alphabet [a-zA-Z].</td>
          <td>Nama depan pelanggan</td>
          <td>Sam</td>
      </tr>
      <tr>
          <td>last_name</td>
          <td>Yes</td>
          <td>20 character alphabet [a-zA-Z].</td>
          <td>Nama belakang pelanggan</td>
          <td>Anthony</td>
      </tr>
      <tr>
          <td>address1</td>
          <td>Yes</td>
          <td>100 character alpha-numeric-symbols [a-zA-Z0-9 -_',.@()/#].</td>
          <td>Alamat pelanggan (baris pertama)</td>
          <td>Buaran I</td>
      </tr>
      <tr>
          <td>address2</td>
          <td>Optional</td>
          <td>100 character alpha-numeric-symbols [a-zA-Z0-9 -_',.@()/#].</td>
          <td>Alamat pelanggan (baris kedua)</td>
          <td>Pulogadung</td>
      </tr>
      <tr>
          <td>city</td>
          <td>Yes</td>
          <td>20 character alphabet [a-zA-Z].</td>
          <td>Kota alamat pelanggan.</td>
          <td>Jakarta</td>
      </tr>
      <tr>
          <td>postal_code</td>
          <td>Yes</td>
          <td>10 character numbers [0-9].</td>
          <td>Kode pos alamat pelanggan</td>
          <td>16954</td>
      </tr>
	  <tr>
          <td>country_code</td>
          <td>Optional</td>
		  <td><a href="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3</a> â€“ Huruf besar. Default adalah IDN jika parameter tidak dikirim.</td>
          <td>Kode negara pelanggan</td>
          <td>IDN</td>
      </tr>
      <tr>
          <td>phone</td>
          <td>Yes</td>
          <td>Numeric minimum 9 character and maximum 19 character [0-9].</td>
          <td>Nomor telepon pelanggan</td>
          <td>0123456789123</td>
      </tr>
    </tbody>
</table>

</div><!-- end of step 3-->

<div class="tab-pane" id="step4"><!-- step 4-->

<!-- empat -->
<h3>Menangani Respon</h3>

<h4>Request Status dan Transaction Status</h4>

<p>Untuk setiap request ke VT-Direct, merchant akan memperoleh 2 status response: Request Status (<code>status</code>) dan Transaction Status (<code>transaction_status</code>). Request Status menunjukkan apakah request yang dilakukan merchant berhasil atau tidak. Sedangkan Transaction Status menunjukkan status transaksi dari order yang terkait dengan request tersebut. Lihat contoh berikut ini untuk lebih detil:</p>

<h4>Request Status</h4>
<p>Setiap kali merchant mengirim request ke VT-Direct, merchant akan mendapatkan respon Request Status dari VT-Direct. Berikut ini adalah daftar kemungkinan Request Status yang dikembalikan oleh VT-Direct:</p>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Request Status</th>
      <th>Deskripsi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>VD00</td>
      <td>Sukses</td>
      <td>Request sukses.</td>
    </tr>
    <tr>
      <td>VD01</td>
      <td>Gagal</td>
      <td>Validasi gagal (Contoh: nomor kartu kredit tidak valid, parameter lain tidak valid)</td>
    </tr>
    <tr>
      <td>VD02</td>
      <td>Gagal</td>
      <td>Merchant tidak terdaftar, atau client_key/server_key salah.</td>
    </tr>
    <tr>
      <td>VD03</td>
      <td>Gagal</td>
      <td>Token salah, atau Token sudah tidak berlaku.</td>
    </tr>
    <tr>
      <td>VD04</td>
      <td>Gagal</td>
      <td>Alamat IP yang melakukukan Charge Request sama dengan alamat IP yang melakukan Request Token. (Seharusnya berbeda).</td>
    </tr>
    <tr>
      <td>VD05</td>
      <td>Gagal</td>
      <td>Multiple charges dilakukan pada satu kartu kredit yang sama. Kartu kredit yang sama hanya bisa melakukan transaksi lagi 3 menit setelah transaksi sebelumnya selesai.</td>
    </tr>
    <tr>
      <td>VD99</td>
      <td>Gagal</td>
      <td>Terjadi kesalahan dalam sistem Veritrans. <a href="mailto:support@veritrans.co.id">Hubungi Veritrans Support</a> jika hal ini terjadi.</td>
    </tr>
  </tbody>
</table>

<h4>Transaction Status</h4>
<p>Setiap transaksi memiliki lima kemungkinan Transaction Status, yaitu: Deny, Cancel, Challenge, Authorize, and Settlement.</p>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Deskripsi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>deny</td>
      <td>Transaksi ditolak oleh bank atau Veritrans Fraud Detection System(FDS)</td>
    </tr>
    <tr>
      <td>cancel</td>
      <td>Transaksi dibatalkan</td>
    </tr>
    <tr>
      <td>challenge</td>
      <td>Transaksi diterima oleh bank, tetapi FDS menganggap transaksi perlu direview secara manual oleh merchant di MAP.</td>
    </tr>
    <tr>
      <td>authorize</td>
      <td>Transaksi sudah diterima oleh bank dan FDS. (Transaksi masih bisa dibatalkan selama bank belum melakukan proses settlement.)</td>
    </tr>
    <tr>
      <td>settlement</td>
      <td>Transaksi telah melalui proses settlement oleh bank. (Transaksi sudah tidak dapat dibatalkan. Jika merchant ingin melakukan reverse transaction, harus melalui proses refund manual. Hubungi Veritrans untuk informasi lebih lanjut.)</td>
    </tr>
  </tbody>
</table>

<h4>Contoh Response</h4>
<p>Jika request transaction sukses, berikut ini adalah contoh response yang diberikan oleh VT-Direct:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vtdirect2&quot;</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">&quot;gross_amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;echo.khannedy@gmail.com&quot;</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">&quot;order_items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10&quot;</span><span class="p">,</span><span class="w">
        </span><span class="s2">&quot;price&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="s2">&quot;qty&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mie&quot;</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;11&quot;</span><span class="p">,</span><span class="w">
        </span><span class="s2">&quot;price&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">&quot;qty&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mie&quot;</span><span class="w">
      </span><span class="p">}</span><span class="w"> 
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">&quot;shipping_address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> 
      </span><span class="s2">&quot;firstName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sam&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;lastName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anthony&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;postalCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;16954&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;phone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0123456789123&quot;</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="s2">&quot;billing_address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">&quot;firstName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sam&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;lastName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anthony&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;postalCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;16954&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;phone&quot;</span><span class="p">:</span><span class="w"> 
      </span><span class="s2">&quot;0123456789123&quot;</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">&quot;card_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4556XXXXXXXXXX12&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s2">&quot;transaction_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;authorize&quot;</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VD00&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success do charge transaction&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Jika ada kesalahan yang terjadi saat request dilakukan, berikut ini adalah contoh response yang diberikan oleh VT-Direct:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
</span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VD03&quot;</span><span class="p">,</span><span class="w">
</span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;failure&quot;</span><span class="p">,</span><span class="w">
</span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Your token is expire&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<h4>Contoh kode</h4>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#php3" data-toggle="tab">PHP</a></li>
	<li><a href="#ruby3" data-toggle="tab">Ruby</a></li>
</ul>

<div class="tab-content">
<div class="tab-pane active" id="php3">
<pre class="highlight php"><span class="cp">&lt;?php</span>
<span class="c1">// (see previous step)
//...
</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">data</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="s1">'deny'</span><span class="o">:</span>
			<span class="k">echo</span> <span class="s2">&quot;transaction status: deny&quot;</span><span class="p">;</span>
			<span class="c1">//do some business logic here
</span>			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="s1">'cancel'</span><span class="o">:</span>
			<span class="k">echo</span> <span class="s2">&quot;transaction status: cancel&quot;</span><span class="p">;</span>
			<span class="c1">//do some business logic here
</span>			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="s1">'challenge'</span><span class="o">:</span>
			<span class="k">echo</span> <span class="s2">&quot;transaction status: challenge&quot;</span><span class="p">;</span>
			<span class="c1">//do some business logic here
</span>			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="s1">'authorize'</span><span class="o">:</span>
			<span class="k">echo</span> <span class="s2">&quot;transaction status: authorize&quot;</span><span class="p">;</span>
			<span class="c1">//do some business logic here
</span>			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="s1">'settlement'</span><span class="o">:</span>
			<span class="k">echo</span> <span class="s2">&quot;transaction status: settlement&quot;</span><span class="p">;</span>
			<span class="c1">//do some business logic here
</span>			<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>			
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
	<span class="c1">// Error while sending charge request to VT-Direct server. Check request status for further info.
</span>	<span class="c1">// Please customize the error.
</span>	<span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">message</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</pre></div>
<div class="tab-pane" id="ruby3">
<pre class="highlight ruby">
<span class="c1"># ...</span>
<span class="c1"># see previous step</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">JSON</span><span class="nf">.parse</span> <span class="n">response</span><span class="nf">.body</span>

<span class="k">if</span> <span class="n">result</span><span class="o">[</span><span class="s1">'status'</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span>
  <span class="k">case</span> <span class="n">result</span><span class="o">[</span><span class="s1">'data'</span><span class="o">][</span><span class="s1">'transaction_status'</span><span class="o">]</span>
  <span class="k">when</span> <span class="s1">'deny'</span>
    <span class="c1">#do some business logic here</span>
  <span class="k">when</span> <span class="s1">'cancel'</span>
    <span class="c1">#do some business logic here</span>
  <span class="k">when</span> <span class="s1">'challenge'</span>
    <span class="c1">#do some business logic here</span>
  <span class="k">when</span> <span class="s1">'authorize'</span>
    <span class="c1">#do some business logic here</span>
  <span class="k">when</span> <span class="s1">'settlement'</span>
    <span class="c1">#do some business logic here</span>
  <span class="k">end</span>
<span class="k">else</span>
  <span class="c1"># Error while sending charge request to VT-Direct server. Check request status to see error code description.</span>
	<span class="c1"># Please customize the error.</span>
<span class="k">end</span>
</pre>	</div>
</div>


</div><!-- end of step 4-->

	
</div><!-- end of tab-content-->





			<div class="pagination">
				<ul></ul>
			</div>
          </div>
        </div><!--/span-->
      </div><!--/row-->

    </div><!--/.container-->
    <div class="custom-container footer">
  <div class="wrapper">
    <div class="row">
      <div class="col-md-12 footer-nav">
        <div class="content text-center">
          <a href="https://www.veritrans.co.id" title="">Home</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/whatwedo.html" title="">What We Do</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/pricing.html" title="">Pricing</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/about.html" title="">About</a> <span class="divider">|</span>
          <a href="http://blog.veritrans.co.id/" title="">Blog</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/career.html" title="">Career</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/contact.html" title="">Contact</a> <span class="divider">|</span>
          <a href="https://docs.google.com/document/d/1Z0s7CsXp91YD52ibWcQ7iIQ6TDtWr3XCI1uaFQF12-w/pub" title="System Documentations">Docs</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/press.html" title="">Press</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/privacy.html" title="">Privacy Policy</a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 copyright">
        <div class="content text-center">
          <span>Â©2014 PT. Midtrans (Veritrans Indonesia). All Rights Reserved</span>
        </div>
      </div>
    </div>
  </div>
</div>

    <script src="../../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../../javascripts/bootstrap.min.js" type="text/javascript"></script>
    <script>
    $(document).ready(function() {
      $('[data-toggle=offcanvas]').click(function() {
        $('.row-offcanvas').toggleClass('active');
      });
    });
    </script>
  </body>
</html>
