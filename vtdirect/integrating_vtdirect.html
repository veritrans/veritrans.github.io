<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Veritrans API Documentation">
    <meta name="author" content="">
    <link href="../stylesheets/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../stylesheets/offcanvas.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../stylesheets/github.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../stylesheets/vt.css" media="screen" rel="stylesheet" type="text/css" />
    <title>Docs - Veritrans Indonesia</title>
		<link rel="shortcut icon" href="/favicon.ico"/>

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <!-- Fixed navbar -->
<div class="header navbar navbar-default navbar-fixed-top">
  <div class="custom-container">
    <div class="col-md-3 navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <h2 class="logo"><a href="https://www.veritrans.co.id/" title="Home"><span>Veritrans</span></a></h2>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="https://www.veritrans.co.id/whatwedo.html">what we do</a></li>
				<li><a href="https://www.veritrans.co.id/index.html#vt-products" title="Our Online Payment Products">products</a></li>
        <li><a href="https://www.veritrans.co.id/pricing.html">pricing</a></li>
        <li><a href="https://www.veritrans.co.id/about.html">about</a></li>
        <li><a href="http://docs.veritrans.co.id/" class="current">docs</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">more <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="http://blog.veritrans.co.id/">blog</a></li>
            <li><a href="https://www.veritrans.co.id/career.html">career</a></li>
            <li><a href="https://www.veritrans.co.id/contact.html">contact</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right register-login">
        <li class="pull-left"><a href="https://payments.veritrans.co.id/map/users/sign_up" class="register">register</a></li>
        <li class="pull-left"><a href="https://payments.veritrans.co.id/map/users/sign_in">login</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>

    <div class="custom-container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
	<div class="documentation-sidebar">
		<ul class="sidebar">
			<li><a class="parent">VT-Web</a>
				<ul class="child-menu">
					
					<li class=""><a href="/vtweb/">Introduction</a></li>
					
					<li class=""><a href="../vtweb/getting_started.html">Getting Started</a></li>
					
					<li class=""><a href="../vtweb/integrating_vtweb.html">Integrating</a></li>
					
					<li class=""><a href="../vtweb/testing_vtweb.html">Testing</a></li>
					
					<li class=""><a href="../vtweb/going_live.html">Going Live</a></li>
					
					<li class=""><a href="../vtweb/api.html">API Parameters</a></li>
					
					<li class=""><a href="../vtweb/other_features.html">Other Features</a></li>
					
					<li class=""><a href="../vtweb/plugins_and_examples.html">Plugins and examples</a></li>
					
				</ul>
			</li>
			<li><a class="parent">VT-Direct</a>
				<ul class="child-menu">
					
					<li class=""><a href="introduction.html">Introduction</a></li>
					
					<li class=""><a href="getting_started.html">Getting Started</a></li>
					
					<li class="active"><a href="integrating_vtdirect.html">Integrating</a></li>
					
					<li class=""><a href="mobile_integration.html">Mobile Integration</a></li>
					
					<li class=""><a href="testing_vtdirect.html">Testing</a></li>
					
					<li class=""><a href="going_live.html">Going Live</a></li>
					
					<li class=""><a href="other_command.html">Other Commands</a></li>
					
					<li class=""><a href="other_features.html">Other Features</a></li>
					
					<li class=""><a href="examples.html">Examples</a></li>
					
				</ul>
			</li>
			<li><a class="parent">How to</a>
				<ul class="child-menu">
					
					<li class=""><a href="../howto/fds.html">Fraud Detection System (FDS) Response</a></li>
					
					<li class=""><a href="../howto/cancel.html">Cancel/Void an Authorised Transaction</a></li>
					
				</ul>
			</li>
			<li><a class="parent">FAQ</a>
				<ul class="child-menu">
					
					<li class=""><a href="../faq/general.html">General</a></li>
					
					<li class=""><a href="../faq/pricing.html">Pricing</a></li>
					
					<li class=""><a href="../faq/fraud_and_security.html">Fraud and Security</a></li>
					
					<li class=""><a href="../faq/integration.html">Integration</a></li>
					
					<li class=""><a href="../faq/account_management.html">Account Management</a></li>
					
					<li class=""><a href="../faq/fds_response.html">Fraud Detection System (FDS) Response</a></li>
					
				</ul>
			</li>
		</ul>
	</div>
</div><!--/span-->
        <div class="col-xs-12 col-sm-9" id="bodier">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Menu</button>
          </p>
          <div class="vtdirect-integrating-vtdirect">
            <h2>Integrating VT-Direct</h2>

<h3>Four Quick Steps</h3>
<ol>
	<li>Token Request</li>
	<li>Send Token to Merchant</li>
	<li>Charge Transaction</li>
	<li>Response Handling</li>
</ol>

<p><br /></p>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#step1" data-toggle="tab"><span>Step 1</span>Token Request</a></li>
  <li><a href="#step2" data-toggle="tab"><span>Step 2</span>Send Token to Merchant</a></li>
  <li><a href="#step3" data-toggle="tab"><span>Step 3</span>Charge Transaction</a></li>
  <li><a href="#step4" data-toggle="tab"><span>Step 4</span>Response Handling</a></li>
</ul>

<div class="tab-content">
<div class="tab-pane active" id="step1"><!-- step 1-->
<!-- satu -->
<h3>Token Request</h3>

<img src="../images/vtdirect_introduction_1.png" /><p>This section covers steps 1-3 of the VT-Direct process flow chart (Figure 1). Every credit card transaction begins with a <strong>token request</strong>. When the customer clicks "pay", the customer’s credit card data is sent directly to Veritrans by Veritrans.js. Veritrans server than returns a <strong>one-time token</strong> back to the customer's web browser. The one-time token represents the customer's credit card details. This step alleviates the merchant's server from storing or processing credit card information, and thereby significantly reduce the information security compliance requirements for the merchant. </p>
<p>We have provided a small JavaScript applet, Veritrans.js, to simplify the process of requesting Tokens to Veritrans system. To utilize the JavaScript, add Veritrans.js to your payment page like in the example below:</p>

<pre class="highlight html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="na">src=</span><span class="s">&quot;https://payments.veritrans.co.id/vtdirect/veritrans.min.js&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;/script&gt;</span>
</pre>
<p>Next, create a payment form to collect the credit card details of your customer. Note that all fields related to the credit card must not have name attribute to it. This prevents credit card data from being sent over to the merchant's server. </p>

<p>Sample HTML form to collect credit card detail of a customer:</p>

<pre class="highlight html"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;http://mysamplestore.com/sample_payment_handler_url&quot;</span> <span class="na">method=</span><span class="s">&quot;POST&quot;</span> <span class="na">id=</span><span class="s">&quot;payment-form&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;fieldset&gt;</span>
    <span class="nt">&lt;legend&gt;</span>Checkout<span class="nt">&lt;/legend&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label&gt;</span>Card Number<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;card-number&quot;</span> <span class="na">size=</span><span class="s">&quot;20&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label&gt;</span>Expiration (MM/YYYY)<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;card-expiry-month&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;MM&quot;</span> <span class="na">size=</span><span class="s">&quot;2&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;span&gt;</span> / <span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;card-expiry-year&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;YYYY&quot;</span> <span class="na">size=</span><span class="s">&quot;4&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label&gt;</span>CVV<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">&quot;card-cvv&quot;</span> <span class="na">size=</span><span class="s">&quot;4&quot;</span> <span class="na">type=</span><span class="s">&quot;password&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;token_id&quot;</span> <span class="na">name=</span><span class="s">&quot;token_id&quot;</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;submit-button&quot;</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>Submit Payment<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/fieldset&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre>
<p>Once the card details are collected, the JavaScript code below utilizes the Veritrans.js library to send the sensitive card details to Veritrans. Note that the example below utilizes jQuery.</p>

<p>JavaScript code to send card details to Veritrans:</p>

<pre class="highlight html"><span class="nt">&lt;script&gt;</span> <span class="nx">$</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">Veritrans</span><span class="p">.</span><span class="nx">client_key</span> <span class="o">=</span> <span class="s2">&quot;client-key&quot;</span><span class="p">;</span> <span class="c1">// please add client-key from veritrans
</span>
    <span class="kd">function</span> <span class="nx">_cardSet</span><span class="p">(){</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;card_number&quot;</span> <span class="err">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input.card-number&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="s2">&quot;card_exp_month&quot;</span><span class="err">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input.card-expiry-month&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="s2">&quot;card_exp_year&quot;</span> <span class="err">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input.card-expiry-year&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="s2">&quot;card_cvv&quot;</span> <span class="err">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input.card-cvv&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">_success</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#token_id&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">token_id</span><span class="p">);</span> <span class="c1">// store token data in input #token_id
</span>      <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#payment-form&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">submit</span><span class="p">();</span> <span class="c1">//submits Token to merchant server
</span>    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">_error</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span> <span class="c1">// please customize the error
</span>      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.submit-button&#39;</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#payment-form&quot;</span><span class="p">).</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.submit-button&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">,</span> <span class="s2">&quot;disabled&quot;</span><span class="p">);</span> <span class="c1">// disable the submit button
</span>      <span class="nx">Veritrans</span><span class="p">.</span><span class="nx">tokenGet</span><span class="p">(</span><span class="nx">_cardSet</span><span class="p">,</span> <span class="nx">_success</span><span class="p">,</span> <span class="nx">_error</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</pre>
<p>Each token is valid for 75 seconds and for only one transaction. The token expires after a transaction is completed or it exceeds the 75 second time limit.</p>

<h4>Required Query Parameter</h4>
<table>
	<thead>
		<tr>
			<th>Name</th>
			<th>Description</th>
			<th>Example</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>card_number</td>
			<td>Credit Card number</td>
			<td>4111111111111111</td>
		</tr>
		<tr>
			<td>card_exp_month</td>
			<td>Credit Card expiry month</td>
			<td>06</td>
		</tr>
		<tr>
			<td>card_exp_year</td>
			<td>Credit Card expiry year</td>
			<td>2020</td>
		</tr>
		<tr>
			<td>card_cvv</td>
			<td>CVV (Card Verification Value)</td>
			<td>123</td>
		</tr>
		<tr>
			<td>client_key</td>
			<td>Merchant Client Key</td>
			<td>567aee9a-a345-435a-a98c-d001b96c3fa9</td>
		</tr>
	</tbody>
</table>

</div><!-- end of step 1-->

<div class="tab-pane" id="step2"><!-- step 2-->

<!-- dua -->

<h3>Send Token to Merchant</h3>
<p>If you followed the sample HTML code in Step 1-3, remember that you stored the Token in the input <code>token_id</code>.  Use a simple HTTP POST to send the Token into your server.</p>
<h4>Sample code</h4>
<p>This is a sample code on the merchant server to handle the <code>token_id</code> that has been sent from the previous form.</p>
<ul class="nav nav-tabs">
	<li class="active"><a href="#php1" data-toggle="tab">PHP</a></li>
	<li><a href="#ruby1" data-toggle="tab">Ruby</a></li>
</ul>

<div class="tab-content">
<div class="tab-pane active" id="php1">
<pre class="highlight php"><span class="cp">&lt;?php</span>
  <span class="nv">$token</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s2">&quot;token_id&quot;</span><span class="p">];</span> 
<span class="cp">?&gt;</span>
</pre></div>
<div class="tab-pane" id="ruby1">
<pre class="highlight ruby"><span class="n">token</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:token_id</span><span class="o">]</span>
</pre></div>	
</div>

</div><!-- end of step 2-->

<div class="tab-pane" id="step3"><!-- step 3-->

<!-- tiga -->

<h3>Charge Transaction</h3>
<p>Once the Token is submitted to the merchant, the merchant can utilize the Token to conduct a credit card Charge transaction.</p>

<p>Since the Token request is done on the customer's web browser while the Charge transaction is done between the merchant and Veritrans, the IP address for the Token request and Charge transaction should be different from each other. To prevent misuse, we have added a validation to block transactions when the location of the IP address for request Token and Charge transaction is the same.</p>

<p>As noted before, the Token can only be used for one transaction request. If the transaction fails (e.g., declined by bank  or Veritrans' Fraud Detection System), then the merchant will need to get the customer to request a new Token.</p>

<h4>Endpoint</h4>
<table>
	<tr>
		<td>Endpoint</td>
      <td> : </td>
		<td>https://payments.veritrans.co.id/vtdirect/v1/charges</td>
	</tr>
	<tr>
		<td>HTTP Method</td>
      <td> : </td>
		<td>POST</td>
	</tr>
</table> 

<h4>Header</h4>

<table>
	<tr>
		<td>Accept</td>
      <td> : </td>
		<td>Application/JSON</td>
	</tr>
	<tr>
		<td>Content Type</td>
      <td> : </td>
		<td>Application/JSON</td>
	</tr>
    <tr>
      <td>Authorization</td>
      <td> : </td>
      <td><strong>Basic Base64 (server-key:)</strong></td>
    </tr>
</table> 

<p>The header for authorization can be generated by obtaining the Base 64 of the <code>server_key</code>. This is an implementation of Basic Authentication.</p>
<p>Basic authentication must follow the following format:</p>

<pre class="highlight text">Username: Password
</pre>
<p>Since there is no password for the <code>server_key</code>, we will leave the password blank. Therefore, if our <code>server_key</code> is</p>

<pre class="highlight text">94960ece-9513-4265-9cf2-67a4da330213
</pre>
<p>It will become:</p>

<pre class="highlight text">94960ece-9513-4265-9cf2-67a4da330213:
</pre>
<p>Note: make  sure  that  there  is  a  colon  ":"  after  the <code>server_key</code>. Merchant then needs to convert it into Base 64 to get:</p>


<pre class="highlight text">OTQ5NjBlY2UtOTUxMy00MjY1LTljZjItNjdhNGRhMzMwMjEzOg==
</pre>
<p>Therefore, the header Authorization will be:</p>

<pre class="highlight text">Authorization : Basic OTQ5NjBlY2UtOTUxMy00MjY1LTljZjItNjdhNGRhMzMwMjEzOg==
</pre>
<p>Make sure that you include "Basic" before the Base 64 <code>server_key</code>.</p>

<h4>Body</h4>

<p>Here is a body raw example of a charge transaction request to Veritrans in JSON:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;token_id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;94960ece-9513-4265-9cf2-67a4da330213&quot;</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">&quot;order_id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;order123&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;order_items&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;price&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;qty&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mie Ayam&quot;</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">&quot;id&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;11&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;price&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;qty&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bakso&quot;</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">&quot;gross_amount&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">30000</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;email&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pelanggan@website.com&quot;</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">&quot;shipping_address&quot;</span><span class="w"> </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">&quot;first_name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sam&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;last_name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anthony&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address1&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address2&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;city&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;postal_code&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;16954&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;phone&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0123456789123&quot;</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="s2">&quot;billing_address&quot;</span><span class="w"> </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">&quot;first_name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sam&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;last_name&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anthony&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;address1&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;address2&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;city&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;postal_code&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;16954&quot;</span><span class="p">,</span><span class="w">
      </span><span class="s2">&quot;phone&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0123456789123&quot;</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h4>Sample Code</h4>
<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#php32" data-toggle="tab">PHP</a></li>
	<li><a href="#ruby32" data-toggle="tab">Ruby</a></li>
</ul>

<div class="tab-content">
<div class="tab-pane active" id="php32">
<pre class="highlight php"><span class="cp">&lt;?php</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
 <span class="s1">&#39;token_id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s2">&quot;token_id&quot;</span><span class="p">],</span>
 <span class="s1">&#39;order_id&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;order123&quot;</span><span class="p">,</span> 
 <span class="s1">&#39;order_items&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
  <span class="p">[</span><span class="s1">&#39;id&#39;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span>
   <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">10000</span><span class="p">,</span>
   <span class="s1">&#39;qty&#39;</span>   <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
   <span class="s1">&#39;name&#39;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;Mie Ayam&quot;</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">&#39;id&#39;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;11&quot;</span><span class="p">,</span>
   <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">20000</span><span class="p">,</span>
   <span class="s1">&#39;qty&#39;</span>   <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
   <span class="s1">&#39;name&#39;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;Bakso&quot;</span><span class="p">]</span>
  <span class="p">),</span>
 <span class="s2">&quot;gross_amount&quot;</span>   <span class="o">=&gt;</span> <span class="mi">30000</span><span class="p">,</span>
 <span class="s2">&quot;email&quot;</span>          <span class="o">=&gt;</span> <span class="s2">&quot;vt-testing@veritrans.co.id&quot;</span><span class="p">,</span>
 <span class="s2">&quot;shipping_address&quot;</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
   <span class="s2">&quot;first_name&quot;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;Sam&quot;</span><span class="p">,</span>
   <span class="s2">&quot;last_name&quot;</span>   <span class="o">=&gt;</span> <span class="s2">&quot;Anthony&quot;</span><span class="p">,</span>
   <span class="s2">&quot;address1&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span>
   <span class="s2">&quot;address2&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span>
   <span class="s2">&quot;city&quot;</span>        <span class="o">=&gt;</span> <span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span>
   <span class="s2">&quot;postal_code&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;16954&quot;</span><span class="p">,</span>
   <span class="s2">&quot;phone&quot;</span>       <span class="o">=&gt;</span> <span class="s2">&quot;0123456789123&quot;</span>
   <span class="p">),</span>
 <span class="s2">&quot;billing_address&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
   <span class="s2">&quot;first_name&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;Sam&quot;</span><span class="p">,</span>
   <span class="s2">&quot;last_name&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;Anthony&quot;</span><span class="p">,</span>
   <span class="s2">&quot;address1&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span>
   <span class="s2">&quot;address2&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span>
   <span class="s2">&quot;city&quot;</span>          <span class="o">=&gt;</span> <span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span>
   <span class="s2">&quot;postal_code&quot;</span>   <span class="o">=&gt;</span> <span class="s2">&quot;16954&quot;</span><span class="p">,</span>
   <span class="s2">&quot;phone&quot;</span>         <span class="o">=&gt;</span> <span class="s2">&quot;0123456789123&quot;</span>
   <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$vt_charges_endpoint</span> <span class="o">=</span> <span class="s2">&quot;https://payments.veritrans.co.id/vtdirect/v1/charges&quot;</span><span class="p">;</span>
<span class="nv">$server_key</span> <span class="o">=</span> <span class="s2">&quot;c662f47d-8a2c-4fe7-8ad2-02bfaf1fb725&quot;</span><span class="p">;</span> <span class="c1">//change with your actual server_key
</span><span class="nv">$auth</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;Authorization: Basic %s&#39;</span><span class="p">,</span> <span class="nb">base64_encode</span><span class="p">(</span><span class="nv">$server_key</span><span class="o">.</span><span class="s1">&#39;:&#39;</span><span class="p">));</span>

<span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="nv">$vt_charges_endpoint</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Content-Type: application/json&#39;</span><span class="p">,</span>
		<span class="s1">&#39;Accept: application/json&#39;</span><span class="p">,</span>
		<span class="nv">$auth</span> <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>

<span class="cp">?&gt;</span>

</pre></div>

<div class="tab-pane" id="ruby32">
		<p>
		In this example, we use <strong>Faraday</strong> to help us make HTTP requests. Faraday is a ruby library for making HTTP requests. So, we need to add Faraday to the gemfile. Don't forget to run 'bundle' and restart your server after updating the gemfile.
		</p>
<pre class="highlight ruby"><span class="n">gem</span> <span class="s2">&quot;faraday&quot;</span><span class="p">,</span> <span class="s2">&quot;~&gt; 0.8.8&quot;</span>
</pre>
<p>Add this lines to your controller:</p>

<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">&#39;faraday&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;base64&#39;</span>
</pre>
<p>Finally, this is the sample code on the action that handle the payment form in the previous step. In this sample code we conduct <strong>charge transaction</strong> by utilising Faraday to send the charge data to the Veritrans charges endpoint.</p>

<pre class="highlight ruby">
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s1">&#39;token_id&#39;</span> 		<span class="o">=&gt;</span> <span class="n">params</span><span class="o">[</span><span class="ss">:token_id</span><span class="o">]</span><span class="p">,</span>
	<span class="s1">&#39;order_id&#39;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;order123&quot;</span><span class="p">,</span>
	<span class="s1">&#39;order_items&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span>
		<span class="p">{</span>
		<span class="s1">&#39;id&#39;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span>
		<span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">10000</span><span class="p">,</span>
		<span class="s1">&#39;qty&#39;</span> 	<span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
		<span class="s1">&#39;name&#39;</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Mie Ayam&quot;</span>
		<span class="p">},</span>
		<span class="p">{</span>
		<span class="s1">&#39;id&#39;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;11&quot;</span><span class="p">,</span>
		<span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="mi">20000</span><span class="p">,</span>
		<span class="s1">&#39;qty&#39;</span> 	<span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
		<span class="s1">&#39;name&#39;</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Bakso&quot;</span>
		<span class="p">}</span>
		<span class="o">]</span><span class="p">,</span>
	<span class="s1">&#39;gross_amount&#39;</span> 	<span class="o">=&gt;</span> <span class="mi">30000</span><span class="p">,</span>
	<span class="s2">&quot;email&quot;</span> 				<span class="o">=&gt;</span> <span class="s2">&quot;vt-testing@veritrans.co.id&quot;</span><span class="p">,</span>
	<span class="s1">&#39;shipping_address&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="s2">&quot;first_name&quot;</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Sam&quot;</span><span class="p">,</span>
		<span class="s2">&quot;last_name&quot;</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Anthony&quot;</span><span class="p">,</span>
		<span class="s2">&quot;address1&quot;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span>
		<span class="s2">&quot;address2&quot;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span>
		<span class="s2">&quot;city&quot;</span> 				<span class="o">=&gt;</span> <span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span>
		<span class="s2">&quot;postal_code&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;16954&quot;</span><span class="p">,</span>
		<span class="s2">&quot;phone&quot;</span> 			<span class="o">=&gt;</span> <span class="s2">&quot;0123456789123&quot;</span>
	<span class="p">},</span>
	<span class="s2">&quot;billing_address&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="s2">&quot;first_name&quot;</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Sam&quot;</span><span class="p">,</span>
		<span class="s2">&quot;last_name&quot;</span> 	<span class="o">=&gt;</span> <span class="s2">&quot;Anthony&quot;</span><span class="p">,</span>
		<span class="s2">&quot;address1&quot;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span>
		<span class="s2">&quot;address2&quot;</span> 		<span class="o">=&gt;</span> <span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span>
		<span class="s2">&quot;city&quot;</span> 				<span class="o">=&gt;</span> <span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span>
		<span class="s2">&quot;postal_code&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;16954&quot;</span><span class="p">,</span>
		<span class="s2">&quot;phone&quot;</span> 			<span class="o">=&gt;</span> <span class="s2">&quot;0123456789123&quot;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="n">server_key</span> <span class="o">=</span> <span class="s2">&quot;c662f47d-8a2c-4fe7-8ad2-02bfaf1fb725&quot;</span><span class="p">;</span> <span class="c1">#change with your actual server_key</span>

<span class="n">conn</span> <span class="o">=</span> <span class="no">Faraday</span><span class="nf">.new</span><span class="p">(</span><span class="ss">:url</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://payments.veritrans.co.id&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">faraday</span><span class="o">|</span>
  <span class="n">faraday</span><span class="nf">.request</span>  <span class="ss">:url_encoded</span>             <span class="c1"># form-encode POST params</span>
  <span class="n">faraday</span><span class="nf">.adapter</span>  <span class="no">Faraday</span><span class="nf">.default_adapter</span>  <span class="c1"># make requests with Net::HTTP</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">conn</span><span class="nf">.post</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
  <span class="n">req</span><span class="nf">.url</span> <span class="s1">&#39;/vtdirect/v1/charges&#39;</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">&#39;Accept&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
  <span class="n">req</span><span class="nf">.headers</span><span class="o">[</span><span class="s1">&#39;Authorization&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;Basic &#39;</span> <span class="o">+</span> <span class="no">Base64</span><span class="nf">.encode64</span><span class="p">(</span><span class="n">server_key</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
  <span class="n">req</span><span class="nf">.body</span> <span class="o">=</span> <span class="n">data</span><span class="nf">.to_json</span>
<span class="k">end</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">JSON</span><span class="nf">.parse</span> <span class="n">response</span><span class="nf">.body</span>

</pre>	</div>	
</div><!-- tab-content -->

<h4>Detail Parameters for Charge Transaction</h4>
<table>
<thead>
  <tr>
      <th>Name</th>
      <th>Required</th>
      <th>Type/Size</th>
      <th>Description</th>
      <th>Example</th>
  </tr>
</thead>
<tbody>
  <tr>
      <td>token</td>
      <td>Yes</td>
      <td>Not Applicable</td>
      <td>Token received by the customer's web browser from Veritrans</td>
      <td>94960ece-9513-4265-9cf2-67a4da330213</td>
  </tr>
  <tr>
      <td>order_id</td>
      <td>Yes</td>
      <td>20 character alpha-numeric. No white space.</td>
      <td>Merchant generated order id. Each order id can only perform one charge transaction.</td>
      <td>order1</td>
  </tr>
  <tr>
      <td>order_items</td>
      <td>Yes</td>
      <td>JSON</td>
      <td>List of items purchased</td>
      <td>See example below</td>
  </tr>
  <tr>
      <td>gross_amount</td>
      <td>Yes</td>
      <td>Numeric maximum 99.999.999</td>
      <td>Total transaction amount</td>
      <td>200</td>
  </tr>
  <tr>
      <td>email</td>
      <td>Yes</td>
      <td>30 character alpha-numeric-symbols. No white space.</td>
      <td>Customer email</td>
      <td>pelanggan@website.com</td>
  </tr>
  <tr>
      <td>billing_address</td>
      <td>Yes</td>
      <td>JSON</td>
      <td>Customer billing address</td>
      <td>See example below</td>
  </tr>
  <tr>
      <td>shipping_address</td>
      <td>Optional</td>
      <td>JSON</td>
      <td>Customer shipping address</td>
      <td>See example below</td>
  </tr>
</tbody>
</table>

<p><strong>Note</strong>: As stated before, to prevent misuse, we have added a validation to block transactions when the location of the IP address for request Token and Charge transaction is the same. This can be troublesome when you're doing transactions test on the same computer (same IP address). Here is the solution: for testing purpose, use <strong>vt-testing@veritrans.co.id</strong> for the <code>email</code> parameter so you can test VT-Direct on the same IP address.</p>


<h4>Parameters for Order Item Details</h4>

<table>
    <thead>
      <tr>
          <th>Name</th>
          <th>Required</th>
          <th>Type/Size</th>
          <th>Description</th>
          <th>Example</th>
      </tr>
    </thead>
    <tbody>
      <tr>
          <td>id</td>
          <td>Yes</td>
          <td>20 character alpha-numeric</td>
          <td>Product ID</td>
          <td>produk1</td>
      </tr>
      <tr>
          <td>price</td>
          <td>Yes</td>
          <td>Numeric maximum 9.999.999</td>
          <td>Product Price</td>
          <td>100</td>
      </tr>
      <tr>
          <td>qty</td>
          <td>Yes</td>
          <td>Numeric maximum 9999</td>
          <td>Product Quantity</td>
          <td>1</td>
      </tr>
      <tr>
          <td>name</td>
          <td>Yes</td>
          <td>20 character alpha-numeric</td>
          <td>Product Name</td>
          <td>Mie Instan</td>
      </tr>        
    </tbody>
</table>

<h4>Parameters for Billing and Shipping Address</h4>

<table>
    <thead>
      <tr>
          <th>Name</th>
          <th>Required</th>
          <th>Type/Size</th>
          <th>Description</th>
          <th>Example</th>
      </tr>
    </thead>
    <tbody>
      <tr>
          <td>first_name</td>
          <td>Yes</td>
          <td>20 character alphabet</td>
          <td>Customer first name</td>
          <td>Sam</td>
      </tr>
      <tr>
          <td>last_name</td>
          <td>Yes</td>
          <td>20 character alphabet</td>
          <td>Customer last name</td>
          <td>Anthony</td>
      </tr>
      <tr>
          <td>address1</td>
          <td>Yes</td>
          <td>100 character alpha-numeric-symbols</td>
          <td>Customer address</td>
          <td>Buaran I</td>
      </tr>
      <tr>
          <td>address2</td>
          <td>Optional</td>
          <td>100 character alpha-numeric-symbols</td>
          <td>Customer Address</td>
          <td>Pulogadung</td>
      </tr>
      <tr>
          <td>city</td>
          <td>Yes</td>
          <td>20 character alphabet</td>
          <td>Customer city</td>
          <td>Jakarta</td>
      </tr>
      <tr>
          <td>postal_code</td>
          <td>Yes</td>
          <td>10 character numbers</td>
          <td>Customer postal code</td>
          <td>16954</td>
      </tr>
      <tr>
          <td>phone</td>
          <td>Yes</td>
          <td>Numeric minimum 9 character and maximum 19 character</td>
          <td>Customer phone. No characters like "+" and "-" allowed.</td>
          <td>0123456789123</td>
      </tr>        
    </tbody>
</table>

</div><!-- end of step 3-->

<div class="tab-pane" id="step4"><!-- step 4-->

<!-- empat -->

<h3>Request and Transaction Status</h3>

<p>For every action on VT-Direct, the merchant will receive two status response: Request Status ("status") and Transaction Status ("transaction_status"). The Request Status lets the merchant know whether their request for a particular action was successful or not, while the Transaction Status informs the user of the latest transaction status of a particular order. Please see below for details:</p>

<h4>Request Status</h4>
<p>Every time the merchant communicates with VT-Direct, the merchant will get a request status response back from Veritrans’ system. Below is a list of possible request status that will be returned to the merchant:</p>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Request Status</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>VD00</td>
      <td>Success</td>
      <td>Request is successful (e.g., token request, charge, void, or get status)</td>
    </tr>
    <tr>
      <td>VD01</td>
      <td>Failure</td>
      <td>Validation error (e.g., invalid credit card number, invalid parameter)</td>
    </tr>
    <tr>
      <td>VD02</td>
      <td>Failure</td>
      <td>Merchant is not registered, or incorrect client key or server key</td>
    </tr>
    <tr>
      <td>VD03</td>
      <td>Failure</td>
      <td>Token is incorrect, or Token is expired</td>
    </tr>
    <tr>
      <td>VD04</td>
      <td>Failure</td>
      <td>The IP address that requested the token and the one did the transaction is the same (it needs to be different)</td>
    </tr>
    <tr>
      <td>VD05</td>
      <td>Failure</td>
      <td>Multiple charges to the same credit card number. The same credit card can only be utilized for the another transaction 75 seconds after the previous transaction is complete</td>
    </tr>
    <tr>
      <td>VD99</td>
      <td>Failure</td>
      <td>Veritrans system error. Please contact Veritrans support ASAP.</td>
    </tr>
  </tbody>
</table>

<h4>Transaction Status</h4>
<p>Each transaction will be associated with one of the five transaction statuses: Deny, Cancel, Challenge, Authorize, and Settlement.</p>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>deny</td>
      <td>Denied  by  the  bank  or  by  Veritrans’  Fraud  Detection  System (FDS)</td>
    </tr>
    <tr>
      <td>cancel</td>
      <td>Transaction cancelled</td>
    </tr>
    <tr>
      <td>challenge</td>
      <td>Transaction approved by the bank, but flagged by FDS for further manual review</td>
    </tr>
    <tr>
      <td>authorize</td>
      <td>Transaction authorized by the bank and accepted by FDS. Transaction can still be cancelled since the funds has not been settled by the bank</td>
    </tr>
    <tr>
      <td>settlement</td>
      <td>Transaction is settled by the bank. Transaction cannot be cancelled. If a merchant still needs to reverse a transaction, it will have to go through a manual refund process (please contact Veritrans for further details).</td>
    </tr>
  </tbody>
</table>

<h4>Sample Response</h4>
<p>If the transaction request is successful, below is a sample response that you will get back from Veritrans:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">&quot;order_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vtdirect2&quot;</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">&quot;gross_amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;echo.khannedy@gmail.com&quot;</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">&quot;order_items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10&quot;</span><span class="p">,</span><span class="w">
        </span><span class="s2">&quot;price&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="s2">&quot;qty&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mie&quot;</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;11&quot;</span><span class="p">,</span><span class="w">
        </span><span class="s2">&quot;price&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">&quot;qty&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mie&quot;</span><span class="w">
      </span><span class="p">}</span><span class="w"> 
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">&quot;shipping_address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> 
      </span><span class="s2">&quot;firstName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sam&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;lastName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anthony&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;postalCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;16954&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;phone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0123456789123&quot;</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="s2">&quot;billing_address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">&quot;firstName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sam&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;lastName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Anthony&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Buaran I&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;address2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pulogadung&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jakarta&quot;</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">&quot;postalCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;16954&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;phone&quot;</span><span class="p">:</span><span class="w"> 
      </span><span class="s2">&quot;0123456789123&quot;</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">&quot;card_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4556XXXXXXXXXX12&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s2">&quot;transaction_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;authorize&quot;</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VD00&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success do charge transaction&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>If an error occurs during transmission of the request, you will get a response like the one below:</p>

<pre class="highlight json"><span class="p">{</span><span class="w">
</span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VD03&quot;</span><span class="p">,</span><span class="w">
</span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;failure&quot;</span><span class="p">,</span><span class="w">
</span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Your token is expire&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<h4>Sample code</h4>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#php3" data-toggle="tab">PHP</a></li>
	<li><a href="#ruby3" data-toggle="tab">Ruby</a></li>
</ul>

<div class="tab-content">
<div class="tab-pane active" id="php3">
<pre class="highlight php"><span class="cp">&lt;?php</span>
<span class="c1">// (see previous step)
//...
</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">data</span><span class="o">-&gt;</span><span class="na">transaction_status</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="s1">&#39;deny&#39;</span><span class="o">:</span>
			<span class="k">echo</span> <span class="s2">&quot;transaction status: deny&quot;</span><span class="p">;</span>
			<span class="c1">//do some business logic here
</span>			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="s1">&#39;cancel&#39;</span><span class="o">:</span>
			<span class="k">echo</span> <span class="s2">&quot;transaction status: cancel&quot;</span><span class="p">;</span>
			<span class="c1">//do some business logic here
</span>			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="s1">&#39;challenge&#39;</span><span class="o">:</span>
			<span class="k">echo</span> <span class="s2">&quot;transaction status: challenge&quot;</span><span class="p">;</span>
			<span class="c1">//do some business logic here
</span>			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="s1">&#39;authorize&#39;</span><span class="o">:</span>
			<span class="k">echo</span> <span class="s2">&quot;transaction status: authorize&quot;</span><span class="p">;</span>
			<span class="c1">//do some business logic here
</span>			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="s1">&#39;settlement&#39;</span><span class="o">:</span>
			<span class="k">echo</span> <span class="s2">&quot;transaction status: settlement&quot;</span><span class="p">;</span>
			<span class="c1">//do some business logic here
</span>			<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>			
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
	<span class="c1">// Error while sending charge request to VT-Direct server. Check request status for further info.
</span>	<span class="c1">// Please customize the error.
</span>	<span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">message</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</pre></div>
<div class="tab-pane" id="ruby3">
<pre class="highlight ruby">
<span class="c1"># ...</span>
<span class="c1"># see previous step</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">JSON</span><span class="nf">.parse</span> <span class="n">response</span><span class="nf">.body</span>

<span class="k">if</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;status&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span>
  <span class="k">case</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;data&#39;</span><span class="o">][</span><span class="s1">&#39;transaction_status&#39;</span><span class="o">]</span>
  <span class="k">when</span> <span class="s1">&#39;deny&#39;</span>
    <span class="c1">#do some business logic here</span>
  <span class="k">when</span> <span class="s1">&#39;cancel&#39;</span>
    <span class="c1">#do some business logic here</span>
  <span class="k">when</span> <span class="s1">&#39;challenge&#39;</span>
    <span class="c1">#do some business logic here</span>
  <span class="k">when</span> <span class="s1">&#39;authorize&#39;</span>
    <span class="c1">#do some business logic here</span>
  <span class="k">when</span> <span class="s1">&#39;settlement&#39;</span>
    <span class="c1">#do some business logic here</span>
  <span class="k">end</span>
<span class="k">else</span>
  <span class="c1"># Error while sending charge request to VT-Direct server. Check request status to see error code description.</span>
	<span class="c1"># Please customize the error.</span>
<span class="k">end</span>
</pre>	</div>
</div>


</div><!-- end of step 4-->

	
</div>
<!-- end of tab-content-->



			<div class="pagination">
				<ul><li class="left">« <small>Previous:</small> <a href="getting_started.html">VT-Direct: Getting Started</a></li><li class="right"><small>Next:</small> <a href="mobile_integration.html">VT-Direct: Mobile Integration</a> »</li></ul>
			</div>
          </div>
        </div><!--/span-->
      </div><!--/row-->

    </div><!--/.container-->
    <div class="custom-container footer">
  <div class="wrapper">
    <div class="row">
      <div class="col-md-12 footer-nav">
        <div class="content text-center">
          <a href="https://www.veritrans.co.id" title="">Home</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/whatwedo.html" title="">What We Do</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/pricing.html" title="">Pricing</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/about.html" title="">About</a> <span class="divider">|</span>
          <a href="http://blog.veritrans.co.id/" title="">Blog</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/career.html" title="">Career</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/contact.html" title="">Contact</a> <span class="divider">|</span>
          <a href="http://docs.veritrans.co.id/" title="">Docs</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/press.html" title="">Press</a> <span class="divider">|</span>
          <a href="https://www.veritrans.co.id/privacy.html" title="">Privacy Policy</a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 copyright">
        <div class="content text-center">
          <span>©2014 PT. Midtrans (Veritrans Indonesia). All Rights Reserved</span>
        </div>
      </div>
    </div>
  </div>
</div>

    <script src="../javascripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="../javascripts/offcanvas.js" type="text/javascript"></script>
  </body>
</html>
